{% extends "base.html" %}
{% load static %}


{% block title %} Main Page {% endblock %}

{% block link %}
<link rel="stylesheet" href="{% static 'styles/main.css' %}">
<script src="{% static 'js/jquery-3.7.1.min.js' %}" defer></script>
{% endblock %}

{% block content %}
<header>
    <img src="{% static 'images/logo.png' %}" class="logo">
    {% csrf_token %}
    <div class="tabsExit">
        <div class="tabs">
            <a href="{% url 'main' %}" class="main tab"><img src="{% static 'images/main.png' %}">Головна</a>

            <a href="{% url 'my_publications' %}" class="publications tab"><img
                    src="{% static 'images/publications.png' %}">Мої публікації</a>

            <a href="{% url 'main' %}" class="friends tab"><img src="{% static 'images/friends.png' %}">Друзі</a>

            <a href="{% url 'main' %}" class="chats tab"><img src="{% static 'images/chat.png' %}">Чати</a>

            <a href="{% url 'settings' request.user.id %}" class="settings tab"><img
                    src="{% static 'images/settings.png' %}">Налаштування</a>

        </div>
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button class="exit" onclick=""><img src=" {% static 'images/exit.png' %}">Вихід</button>
        </form>

    </div>
</header>


<main>
    <div class="userInfo">
        <div class="miniProfile">
            <div class="avatarNames">
                <img src="{% static 'images/avatar.png' %}" class="avatar">
                <div class="names">
                    <p class="nickname">{{ request.user.username }}</p>
                    <p class="username">@{{ request.user.username }}123</p>
                </div>
            </div>
            <div class="stats">
                <div class="posts">
                    <p class="count">566</p>
                    <p class="name">Дописи</p>
                </div>

                <div class="readers">
                    <p class="count">12.1K</p>
                    <p class="name">Читачі</p>
                </div>

                <div class="friends">
                    <p class="count">222</p>
                    <p class="name">Друзі</p>
                </div>
            </div>
        </div>

        <div class="requests">
            <div class="blockName">
                <p class="name"><img src="{% static 'images/friends_gray.png' %}">Запити</p>
                <a href="" class="showAll">Дивитись всі</a>
            </div>
            <div class="users">
                <div class="user">
                    <img src="{% static 'images/avatar2.png' %}">
                    <div class="nameSubscribers">
                        <p class="name">Yehor Aung</p>
                        <p class="subscribers">4.3k Підписників</p>
                    </div>
                </div>

                <div class="user">
                    <img src="{% static 'images/avatar3.png' %}">
                    <div class="nameSubscribers">
                        <p class="name">Ann Ann</p>
                        <p class="subscribers">1.6k Підписників</p>
                    </div>
                </div>

                <div class="user">
                    <img src="{% static 'images/avatar4.png' %}">
                    <div class="nameSubscribers">
                        <p class="name">Yeugen Jenua</p>
                        <p class="subscribers">10.3k Підписників</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="messages">
            <div class="blockName">
                <p class="name"><img src="{% static 'images/messages.png' %}">Повідомлення</p>
                <a href="" class="showAll">Дивитись всі</a>
            </div>
            <div class="users">
                <div class="user mona">
                    <img src="{% static 'images/avatar5.png' %}">
                    <div class="nameSubscribers">
                        <div class="nameTime">
                            <p class="name">Mona Lisa</p>
                            <p class="time">09:41</p>
                        </div>
                        <p class="message">Привіт! Як справи?</p>
                    </div>
                </div>
                <div class="user ann">
                    <img src="{% static 'images/avatar6.png' %}">
                    <div class="nameSubscribers ann">
                        <div class="nameTime">
                            <p class="name">Ann Ti</p>
                            <p class="time">25.04.2025</p>
                        </div>
                        <p class="message">Привіт!</p>
                    </div>
                </div>
                <div class="user">
                    <img src="{% static 'images/avatar7.png' %}">
                    <div class="nameSubscribers">
                        <div class="nameTime">
                            <p class="name">Ness Ty</p>
                            <p class="time">25.04.2025</p>
                        </div>
                        <p class="message">Привіт!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="PostPostInput">
        <div class="postArea">
            <div class="sendDiv">
                <input type="text" class="areaInput" placeholder="Про що ти зараз думаєш?">
                <button class="addEmojiBtn">
                    <img src="{% static 'images/add_emoji.png' %}" class="addEmoji imageBtn">
                </button>


                <button class="sendBtn">Перейти до оформлення</button>
            </div>

        </div>
        {% for post in all_posts %}
        <div class="post">
            <div class="postHeader">
                <img src="{% static 'images/avatar.png' %}" class="avatar">
                <p class="text">{{ post.user.username }}</p>
                <div class="paintingDiv">
                    <img src="{% static 'images/painting.png' %}" class="painting">
                </div>
                <div class="dotsDiv">
                    <button><img src="{% static 'images/dots_menu.png' %}" class="dots"></button>
                </div>
            </div>

            <div class="postMain">
                <p class="text">
                    {{ post.title }}<br>
                    {{ post.text }}
                </p>
                <p class="hashtags">
                    {% for tag in post.tags.all %}
                    {{ tag.name }}
                    {% endfor %}
                </p>
                <a href="{{ post.article_link }}" class="publicationLink">{{ post.article_link }}</a>

                <div class="images">
                    {% for img in post.images_set.all %}
                    <img src="{{ img.image.url }}" class="postImage1">
                    {% endfor %}
                </div>
            </div>

            <div class="postFooter">
                <div class="likesViews">
                    <p class="likes like-button {% if request.user in post.likes.all %}liked{% endif %}" id="{% url 'likes' post.pk %}" value="{% url 'likes' post.pk %}"><img src="{% static 'images/likes.png' %}" class="likesImg"><b>{{ post.count_likes }}</b> Вподобань</p>
                    <p class="likes"><img src="{% static 'images/views.png' %}" class="likesImg">{{ post.count_views }}
                        Переглядів</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="background-blur">
        <form method="post" class="publication-creation" enctype="multipart/form-data">
            {% csrf_token %}
            <button id="cancel-bg-blur">x</button>
            {{ form.as_p }}
            <a href="{% url 'create_tag' %}">Створити тег</a>
            <button type="submit">Публікація</button>
        </form>
    </div>

    <script src="{% static 'js/my_publications.js' %}"></script>
</main>

{% endblock %}